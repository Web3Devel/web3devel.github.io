
        
ecmascript:

function initialize( ) {
    generateCrossSection( );
    generateSpine( );
}

function set_crossSectionRadius( csr, ts ) {
    crossSectionRadius = csr;
    generateCrossSection( );
//  Browser.println ('crossSectionRadius = ' + csr);
}

function set_spineRadius( sr, ts ) {
    spineRadius = sr;
    generateSpine( );
//  Browser.println ('spineRadius = ' + sr);
}

function generateCrossSection( ) {
    angle = 0.0;
    delta = (2 * 3.141592653) / crossSectionResolution;
    for ( i = 0; i &lt;= crossSectionResolution; i++ ) {
        crossSection_changed[i][0] =  crossSectionRadius * Math.cos( angle );
        crossSection_changed[i][1] = -crossSectionRadius * Math.sin( angle );
        angle += delta;
    }
    // added code to make ends meet
    crossSection_changed[crossSectionResolution + 1][0] = crossSection_changed[0][0];
    crossSection_changed[crossSectionResolution + 1][1] = crossSection_changed[0][1];
}

function generateSpine( ) {
    angle = 0.0;
    delta = (2 * 3.141592653) / spineResolution;
    for ( i = 0; i &lt;= spineResolution; i++ ) {
        spine_changed[i][0] =  spineRadius * Math.cos( angle );
        spine_changed[i][1] =  0.0;
        spine_changed[i][2] = -spineRadius * Math.sin( angle );
        angle += delta;
    }
    // added code to make ends meet
    spine_changed[spineResolution + 1][0] = spine_changed[0][0];
    spine_changed[spineResolution + 1][1] = 0.0;
    spine_changed[spineResolution + 1][2] = spine_changed[0][2];
}

      