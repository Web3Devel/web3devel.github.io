#VRML V2.0 utf8
# X3D-to-VRML-97 XSL translation autogenerated by X3dToVrml97.xslt
# https://www.web3d.org/x3d/content/X3dToVrml97.xslt
# Generated using XSLT processor: Saxonica

# [X3D] VRML V3.3 utf8
# PROFILE Immersive
# [X3D] version=3.3
# [X3D] noNamespaceSchemaLocation=https://www.web3d.org/specifications/x3d-3.3.xsd
# [head]

# META "title" "Proximity1.x3d"
# META "description" "Proximity door illustrates the use of a ProximitySensor node around a door. When the traveler gets near that door, an animation is triggered that opens the door and plays a sound. When the traveler leaves the area, the door closes and another sound is played."
# META "creator" "David R. Nadeau"
# META "translator" "Don Brutzman"
# META "created" "1 July 1998"
# META "translated" "2 February 2014"
# META "modified" "20 October 2019"
# META "reference" "originals/prox1.wrl"
# META "reference" "http://www.siggraph.org/s98"
# META "reference" "http://www.siggraph.org/s98/conference/courses/18.html"
# META "reference" "http://www.sdsc.edu/~moreland/courses/Siggraph98/vrml97/slides/mt0376.htm"
# META "reference" "http://www.sdsc.edu/~moreland/courses/Siggraph98/vrml97/slides/mt0389.htm"
# META "reference" "http://www.sdsc.edu/~moreland/courses/Siggraph98/vrml97/vrml97.htm"
# META "reference" "https://www.web3d.org/x3d/content/examples/X3dResources.html"
# META "identifier" "https://www.web3d.org/x3d/content/examples/Vrml2Sourcebook/Siggraph98Course/Proximity1.x3d"
# META "generator" "Vrml97ToX3dNist, http://ovrt.nist.gov/v2_x3d.html"
# META "generator" "X3D-Edit, https://savage.nps.edu/X3D-Edit"
# META "license" "../license.html"

# [Scene] ========== ========== ==========

WorldInfo {
  info [ "Copyright (c) 1997, David R. Nadeau" ]
  title "Proximity door"
}
Viewpoint {
  description "Entry view"
  position 0.0 1.6 7.0
}
NavigationInfo {
  avatarSize [ 1.0 1.6 0.75 ]
  headlight FALSE
  speed 4.0
  type [ "WALK" "ANY"  ] 
}
Inline {
  url [ "DungeonRoom.x3d" "https://www.web3d.org/x3d/content/examples/Vrml2Sourcebook/Siggraph98Course/DungeonRoom.x3d" "DungeonRoom.wrl" "https://www.web3d.org/x3d/content/examples/Vrml2Sourcebook/Siggraph98Course/DungeonRoom.wrl" ]
}
Transform {
  translation 0.0 0.0 -5.0
  children [
      Inline {
        url [ "DungeonWall2.x3d" "https://www.web3d.org/x3d/content/examples/Vrml2Sourcebook/Siggraph98Course/DungeonWall2.x3d" "DungeonWall2.wrl" "https://www.web3d.org/x3d/content/examples/Vrml2Sourcebook/Siggraph98Course/DungeonWall2.wrl" ]
      }
  ]
}
Transform {
  translation 0.0 0.0 -4.95
  children [
      DEF LeftDoor Transform {
        children [
            Transform {
              translation -0.75 0.0 0.0
              children [
                  DEF Door Inline {
                    url [ "DungeonDoor.x3d" "https://www.web3d.org/x3d/content/examples/Vrml2Sourcebook/Siggraph98Course/DungeonDoor.x3d" "DungeonDoor.wrl" "https://www.web3d.org/x3d/content/examples/Vrml2Sourcebook/Siggraph98Course/DungeonDoor.wrl" ]
                  }
              ]
            }
        ]
      }
      DEF RightDoor Transform {
        children [
            Transform {
              translation 0.75 0.0 0.0
              children [
                  USE Door
              ]
            }
        ]
      }
      DEF DoorSense ProximitySensor {
        center 0.0 1.75 0.0
        size 6.0 3.5 8.0
      }
  ]
}
Sound {
  maxBack 60.0
  maxFront 60.0
  minBack 20.0
  minFront 20.0
  source DEF OpenSound AudioClip {
    url [ "clunk2.wav" "https://www.web3d.org/x3d/content/examples/Vrml2Sourcebook/Siggraph98Course/clunk2.wav" ]
  }
}
Sound {
  maxBack 60.0
  maxFront 60.0
  minBack 20.0
  minFront 20.0
  source DEF CloseSound AudioClip {
    url [ "clunk1.wav" "https://www.web3d.org/x3d/content/examples/Vrml2Sourcebook/Siggraph98Course/clunk1.wav" ]
  }
}
DEF OpenClock TimeSensor {
  cycleInterval 0.5
  stopTime 1.0
}
DEF CloseClock TimeSensor {
  cycleInterval 0.5
  stopTime 1.0
}
DEF LeftOpen PositionInterpolator {
  key [ 0.0 1.0 ]
  keyValue [ 0.0 0.0 0.0 -1.3 0.0 0.0 ]
}
DEF LeftClose PositionInterpolator {
  key [ 0.0 1.0 ]
  keyValue [ -1.3 0.0 0.0 0.0 0.0 0.0 ]
}
DEF RightOpen PositionInterpolator {
  key [ 0.0 1.0 ]
  keyValue [ 0.0 0.0 0.0 1.3 0.0 0.0 ]
}
DEF RightClose PositionInterpolator {
  key [ 0.0 1.0 ]
  keyValue [ 1.3 0.0 0.0 0.0 0.0 0.0 ]
}
ROUTE DoorSense.enterTime TO OpenSound.set_startTime
ROUTE DoorSense.exitTime TO OpenSound.set_stopTime
ROUTE DoorSense.enterTime TO OpenClock.set_startTime
ROUTE DoorSense.exitTime TO OpenClock.set_stopTime
ROUTE DoorSense.exitTime TO CloseSound.set_startTime
ROUTE DoorSense.enterTime TO CloseSound.set_stopTime
ROUTE DoorSense.exitTime TO CloseClock.set_startTime
ROUTE DoorSense.enterTime TO CloseClock.set_stopTime
ROUTE OpenClock.fraction_changed TO LeftOpen.set_fraction
ROUTE OpenClock.fraction_changed TO RightOpen.set_fraction
ROUTE CloseClock.fraction_changed TO LeftClose.set_fraction
ROUTE CloseClock.fraction_changed TO RightClose.set_fraction
ROUTE LeftOpen.value_changed TO LeftDoor.set_translation
ROUTE LeftClose.value_changed TO LeftDoor.set_translation
ROUTE RightOpen.value_changed TO RightDoor.set_translation
ROUTE RightClose.value_changed TO RightDoor.set_translation
