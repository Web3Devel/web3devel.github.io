#VRML V2.0 utf8
# X3D-to-VRML-97 XSL translation autogenerated by X3dToVrml97.xslt
# https://www.web3d.org/x3d/content/X3dToVrml97.xslt
# Generated using XSLT processor: Saxonica

# [X3D] VRML V3.3 utf8
# PROFILE Immersive
# [X3D] version=3.3
# [X3D] noNamespaceSchemaLocation=https://www.web3d.org/specifications/x3d-3.3.xsd
# [head]

# META "title" "Keyboard.x3d"
# META "description" "Synthesizer keyboard that creates a playable synthesizer keyboard. Each key on the keyboard has a sound and touch sensor associated with it. Touching a key triggers the touch sensor, which triggers the sound."
# META "creator" "David R. Nadeau"
# META "translator" "Don Brutzman"
# META "created" "1 July 1998"
# META "translated" "2 February 2014"
# META "modified" "20 October 2019"
# META "reference" "originals/keybd.wrl"
# META "reference" "http://www.siggraph.org/s98"
# META "reference" "http://www.siggraph.org/s98/conference/courses/18.html"
# META "reference" "http://www.sdsc.edu/~moreland/courses/Siggraph98/vrml97/slides/mt0345.htm"
# META "reference" "http://www.sdsc.edu/~moreland/courses/Siggraph98/vrml97/vrml97.htm"
# META "reference" "https://www.web3d.org/x3d/content/examples/X3dResources.html"
# META "identifier" "https://www.web3d.org/x3d/content/examples/Vrml2Sourcebook/Siggraph98Course/Keyboard.x3d"
# META "generator" "Vrml97ToX3dNist, http://ovrt.nist.gov/v2_x3d.html"
# META "generator" "X3D-Edit, https://savage.nps.edu/X3D-Edit"
# META "license" "../license.html"

# [Scene] ========== ========== ==========

# Things to experiment with...
# Use a Script to trigger sounds on **Mouse button down** not up. Huh, you say? Well, a TouchSensor generates a touch time event on mouse down, not up. Since means that sounds triggered by a TouchSensor seem to happen late... they happen when you release the mouse button, not when you press it. But, a TouchSensor sends a TRUE on it's isActive output on mouse down. So, you could route that into a Script node and grab the associated time stamp, then send THAT out as an event to start the sound. This will remove the lag and make sounds more responsive.
WorldInfo {
  info [ "Copyright (c) 1997, David R. Nadeau" ]
  title "Synthesizer keyboard"
}
Viewpoint {
  description "Entry view"
  orientation 1.0 0.0 0.0 -0.785
  position 0.875 1.5 1.5
}
NavigationInfo {
  headlight FALSE
}
DirectionalLight {
  direction 1.0 -2.0 -0.5
}
Transform {
  children [
      DEF WhiteKey Shape {
        appearance Appearance {
          material Material {
            diffuseColor 1.0 1.0 1.0
          }
        }
        geometry Box {
          size 0.23 0.1 1.5
        }
      }
      DEF C4 TouchSensor {
      }
      Sound {
        maxBack 100.0
        maxFront 100.0
        source DEF PitchC4 AudioClip {
          url [ "tone1.wav" "https://www.web3d.org/x3d/content/examples/Vrml2Sourcebook/Siggraph98Course/tone1.wav" ]
        }
      }
  ]
}
Transform {
  translation 0.125 0.1 -0.375
  children [
      DEF BlackKey Shape {
        appearance Appearance {
          material Material {
            diffuseColor 0.4 0.4 0.4
          }
        }
        geometry Box {
          size 0.2 0.1 0.75
        }
      }
      DEF Cs4 TouchSensor {
      }
      Sound {
        maxBack 100.0
        maxFront 100.0
        source DEF PitchCs4 AudioClip {
          pitch 1.059
          url [ "tone1.wav" "https://www.web3d.org/x3d/content/examples/Vrml2Sourcebook/Siggraph98Course/tone1.wav" ]
        }
      }
  ]
}
Transform {
  translation 0.25 0.0 0.0
  children [
      USE WhiteKey
      DEF D4 TouchSensor {
      }
      Sound {
        maxBack 100.0
        maxFront 100.0
        source DEF PitchD4 AudioClip {
          pitch 1.122
          url [ "tone1.wav" "https://www.web3d.org/x3d/content/examples/Vrml2Sourcebook/Siggraph98Course/tone1.wav" ]
        }
      }
  ]
}
Transform {
  translation 0.375 0.1 -0.375
  children [
      USE BlackKey
      DEF Ds4 TouchSensor {
      }
      Sound {
        maxBack 100.0
        maxFront 100.0
        source DEF PitchDs4 AudioClip {
          pitch 1.189
          url [ "tone1.wav" "https://www.web3d.org/x3d/content/examples/Vrml2Sourcebook/Siggraph98Course/tone1.wav" ]
        }
      }
  ]
}
Transform {
  translation 0.5 0.0 0.0
  children [
      USE WhiteKey
      DEF E4 TouchSensor {
      }
      Sound {
        maxBack 100.0
        maxFront 100.0
        source DEF PitchE4 AudioClip {
          pitch 1.26
          url [ "tone1.wav" "https://www.web3d.org/x3d/content/examples/Vrml2Sourcebook/Siggraph98Course/tone1.wav" ]
        }
      }
  ]
}
Transform {
  translation 0.75 0.0 0.0
  children [
      USE WhiteKey
      DEF F4 TouchSensor {
      }
      Sound {
        maxBack 100.0
        maxFront 100.0
        source DEF PitchF4 AudioClip {
          pitch 1.335
          url [ "tone1.wav" "https://www.web3d.org/x3d/content/examples/Vrml2Sourcebook/Siggraph98Course/tone1.wav" ]
        }
      }
  ]
}
Transform {
  translation 0.875 0.1 -0.375
  children [
      USE BlackKey
      DEF Fs4 TouchSensor {
      }
      Sound {
        maxBack 100.0
        maxFront 100.0
        source DEF PitchFs4 AudioClip {
          pitch 1.414
          url [ "tone1.wav" "https://www.web3d.org/x3d/content/examples/Vrml2Sourcebook/Siggraph98Course/tone1.wav" ]
        }
      }
  ]
}
Transform {
  translation 1.0 0.0 0.0
  children [
      USE WhiteKey
      DEF G4 TouchSensor {
      }
      Sound {
        maxBack 100.0
        maxFront 100.0
        source DEF PitchG4 AudioClip {
          pitch 1.498
          url [ "tone1.wav" "https://www.web3d.org/x3d/content/examples/Vrml2Sourcebook/Siggraph98Course/tone1.wav" ]
        }
      }
  ]
}
Transform {
  translation 1.125 0.1 -0.375
  children [
      USE BlackKey
      DEF Gs4 TouchSensor {
      }
      Sound {
        maxBack 100.0
        maxFront 100.0
        source DEF PitchGs4 AudioClip {
          pitch 1.587
          url [ "tone1.wav" "https://www.web3d.org/x3d/content/examples/Vrml2Sourcebook/Siggraph98Course/tone1.wav" ]
        }
      }
  ]
}
Transform {
  translation 1.25 0.0 0.0
  children [
      USE WhiteKey
      DEF A5 TouchSensor {
      }
      Sound {
        maxBack 100.0
        maxFront 100.0
        source DEF PitchA5 AudioClip {
          pitch 1.682
          url [ "tone1.wav" "https://www.web3d.org/x3d/content/examples/Vrml2Sourcebook/Siggraph98Course/tone1.wav" ]
        }
      }
  ]
}
Transform {
  translation 1.375 0.1 -0.375
  children [
      USE BlackKey
      DEF As5 TouchSensor {
      }
      Sound {
        maxBack 100.0
        maxFront 100.0
        source DEF PitchAs5 AudioClip {
          pitch 1.782
          url [ "tone1.wav" "https://www.web3d.org/x3d/content/examples/Vrml2Sourcebook/Siggraph98Course/tone1.wav" ]
        }
      }
  ]
}
Transform {
  translation 1.5 0.0 0.0
  children [
      USE WhiteKey
      DEF B5 TouchSensor {
      }
      Sound {
        maxBack 100.0
        maxFront 100.0
        source DEF PitchB5 AudioClip {
          pitch 1.888
          url [ "tone1.wav" "https://www.web3d.org/x3d/content/examples/Vrml2Sourcebook/Siggraph98Course/tone1.wav" ]
        }
      }
  ]
}
Transform {
  translation 1.75 0.0 0.0
  children [
      USE WhiteKey
      DEF C5 TouchSensor {
      }
      Sound {
        maxBack 100.0
        maxFront 100.0
        source DEF PitchC5 AudioClip {
          pitch 2.0
          url [ "tone1.wav" "https://www.web3d.org/x3d/content/examples/Vrml2Sourcebook/Siggraph98Course/tone1.wav" ]
        }
      }
  ]
}
ROUTE C4.touchTime TO PitchC4.set_startTime
ROUTE Cs4.touchTime TO PitchCs4.set_startTime
ROUTE D4.touchTime TO PitchD4.set_startTime
ROUTE Ds4.touchTime TO PitchDs4.set_startTime
ROUTE E4.touchTime TO PitchE4.set_startTime
ROUTE F4.touchTime TO PitchF4.set_startTime
ROUTE Fs4.touchTime TO PitchFs4.set_startTime
ROUTE G4.touchTime TO PitchG4.set_startTime
ROUTE Gs4.touchTime TO PitchGs4.set_startTime
ROUTE A5.touchTime TO PitchA5.set_startTime
ROUTE As5.touchTime TO PitchAs5.set_startTime
ROUTE B5.touchTime TO PitchB5.set_startTime
ROUTE C5.touchTime TO PitchC5.set_startTime
