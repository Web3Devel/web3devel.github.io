#VRML V2.0 utf8
# X3D-to-VRML-97 XSL translation autogenerated by X3dToVrml97.xslt
# https://www.web3d.org/x3d/content/X3dToVrml97.xslt
# Generated using XSLT processor: Saxonica

# [X3D] VRML V3.3 utf8
# PROFILE Immersive
# [X3D] version=3.3
# [X3D] noNamespaceSchemaLocation=https://www.web3d.org/specifications/x3d-3.3.xsd
# [head]

# META "title" "Towers.x3d"
# META "description" "This world illustrates the use of translation, rotation, and scaling to build a multi-level tower."
# META "creator" "David R. Nadeau, John L. Moreland, Michael M. Heck"
# META "translator" "Don Brutzman"
# META "created" "1 July 1998"
# META "translated" "2 February 2014"
# META "modified" "20 October 2019"
# META "reference" "originals/towers.wrl"
# META "reference" "http://www.siggraph.org/s98"
# META "reference" "http://www.siggraph.org/s98/conference/courses/18.html"
# META "reference" "http://www.sdsc.edu/~moreland/courses/Siggraph98/vrml97/slides/mt0051.htm"
# META "reference" "http://www.sdsc.edu/~moreland/courses/Siggraph98/vrml97/vrml97.htm"
# META "reference" "https://www.web3d.org/x3d/content/examples/X3dResources.html"
# META "identifier" "https://www.web3d.org/x3d/content/examples/Vrml2Sourcebook/Siggraph98Course/Towers.x3d"
# META "generator" "Vrml97ToX3dNist, http://ovrt.nist.gov/v2_x3d.html"
# META "generator" "X3D-Edit, https://savage.nps.edu/X3D-Edit"
# META "license" "../license.html"

# [Scene] ========== ========== ==========

# A tower is built starting with a single pole and archway inlined from towerprt.wrl. This part is instanced 12 times around the perimeter of the tower by doing successive rotations. Add a cylinder for the ceiling, and a level is complete.
# A level is then instanced three more times to build the next three upper levels of the tower. Each instance moves up to the next level, then scales the generic level down a bit and puts it there. This repeated scaling is what gives the tower it's diminishing size for the upper levels.
# A glowing, rotating cube is added to the top of the generic tower. An OrientationInterpolator keeps the cube rotating.
# Things to experiment with:
# Add sound!
# Add a spiraling ramp that leads to the upper levels. Perhaps put something interesting on each level. Perhaps make the rotating cube on top do something... such as be an Anchor leading to another world!
WorldInfo {
  info [ "Copyright (c) 1997, David R. Nadeau" ]
  title "The Tower"
}
Viewpoint {
  description "Entry view"
  orientation 1.0 0.0 0.0 0.2
  position 0.0 1.6 20.0
}
NavigationInfo {
  headlight FALSE
  speed 2.0
}
Background {
  skyAngle [ 1.37 1.57 ]
  skyColor [ 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.5 0.0 ]
}
DirectionalLight {
  ambientIntensity 0.2
  direction 1.0 -0.5 -1.0
}
DirectionalLight {
  ambientIntensity 0.2
  color 0.0 0.3 1.0
  direction -1.0 1.0 -1.0
  intensity 0.7
}
Transform {
  scale 0.4 0.4 0.4
  children [
      DEF OneLevel Transform {
        scale 2.0 1.0 2.0
        translation 0.0 3.5 0.0
        children [
            DEF HalfLevel Group {
              children [
                  DEF Part Transform {
                    rotation 0.0 1.0 0.0 0.26
                    translation 0.0 0.0 7.73
                    children [
                        Inline {
                          url [ "TowerPart.x3d" "https://www.web3d.org/x3d/content/examples/Vrml2Sourcebook/Siggraph98Course/TowerPart.x3d" "TowerPart.wrl" "https://www.web3d.org/x3d/content/examples/Vrml2Sourcebook/Siggraph98Course/TowerPart.wrl" ]
                        }
                    ]
                  }
                  Transform {
                    rotation 0.0 1.0 0.0 0.52
                    children [
                        USE Part
                    ]
                  }
                  Transform {
                    rotation 0.0 1.0 0.0 1.05
                    children [
                        USE Part
                    ]
                  }
                  Transform {
                    rotation 0.0 1.0 0.0 1.57
                    children [
                        USE Part
                    ]
                  }
                  Transform {
                    rotation 0.0 1.0 0.0 2.09
                    children [
                        USE Part
                    ]
                  }
                  Transform {
                    rotation 0.0 1.0 0.0 2.62
                    children [
                        USE Part
                    ]
                  }
              ]
            }
            Transform {
              rotation 0.0 1.0 0.0 3.14
              children [
                  USE HalfLevel
              ]
            }
            Transform {
              translation 0.0 3.5 0.0
              children [
                  Shape {
                    appearance Appearance {
                      textureTransform TextureTransform {
                      }
                      material Material {
                        ambientIntensity 0.6
                      }
                      texture ImageTexture {
                        url [ "marble_g.jpg" "https://www.web3d.org/x3d/content/examples/Vrml2Sourcebook/Siggraph98Course/marble_g.jpg" ]
                      }
                    }
                    geometry Cylinder {
                      height 0.05
                      radius 8.2
                      side FALSE
                    }
                  }
              ]
            }
        ]
      }
      Shape {
        appearance Appearance {
          material Material {
            diffuseColor 0.0 0.0 0.0
            transparency 0.25
          }
        }
        geometry Cylinder {
          bottom FALSE
          height 0.05
          radius 16.4
          side FALSE
        }
      }
      Transform {
        rotation 0.0 1.0 0.0 0.26
        scale 0.8 0.9 0.8
        translation 0.0 7.0 0.0
        children [
            USE OneLevel
        ]
      }
      Transform {
        scale 0.6 0.8 0.6
        translation 0.0 13.3 0.0
        children [
            USE OneLevel
        ]
      }
      Transform {
        rotation 0.0 1.0 0.0 0.26
        scale 0.4 0.7 0.4
        translation 0.0 18.9 0.0
        children [
            USE OneLevel
        ]
      }
      DEF Thing Transform {
        translation 0.0 31.0 0.0
        children [
            Transform {
              rotation -1.0 1.0 1.0 0.785
              children [
                  Shape {
                    appearance Appearance {
                      material Material {
                        ambientIntensity 1.0
                        diffuseColor 0.0 1.0 0.0
                      }
                      texture DEF BlurImage ImageTexture {
                        url [ "fire_g.jpg" "https://www.web3d.org/x3d/content/examples/Vrml2Sourcebook/Siggraph98Course/fire_g.jpg" ]
                      }
                    }
                    geometry Box {
                      size 3.0 3.0 3.0
                    }
                  }
              ]
            }
        ]
      }
  ]
}
Shape {
  appearance Appearance {
    textureTransform TextureTransform {
      scale 5.0 5.0
    }
    material Material {
      ambientIntensity 0.8
      diffuseColor 0.0 1.0 0.3
    }
    texture USE BlurImage
  }
  geometry IndexedFaceSet {
    coordIndex [ 0 1 2 3 -1 ]
    coord Coordinate {
      point [ -40.0 0.0 80.0 40.0 0.0 80.0 40.0 0.0 -40.0 -40.0 0.0 -40.0 ]
    }
  }
}
DEF ThingTimer TimeSensor {
  cycleInterval 4.0
  loop TRUE
  startTime 1.0
}
DEF ThingSpinner OrientationInterpolator {
  key [ 0.0 0.5 1.0 ]
  keyValue [ 0.0 1.0 0.0 0.0 0.0 1.0 0.0 3.14 0.0 1.0 0.0 6.28 ]
}
ROUTE ThingTimer.fraction_changed TO ThingSpinner.set_fraction
ROUTE ThingSpinner.value_changed TO Thing.set_rotation
