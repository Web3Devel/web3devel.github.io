#VRML V2.0 utf8
# X3D-to-VRML-97 XSL translation autogenerated by X3dToVrml97.xslt
# https://www.web3d.org/x3d/content/X3dToVrml97.xslt
# Generated using XSLT processor: Saxonica

# [X3D] VRML V3.3 utf8
# PROFILE Immersive
# [X3D] version=3.3
# [X3D] noNamespaceSchemaLocation=https://www.web3d.org/specifications/x3d-3.3.xsd
# [head]

# META "title" "Doorway.x3d"
# META "description" "The Doorway scene consists of four sliding stairs that lead forward along a path to a glowing white doorway."
# META "creator" "David R. Nadeau"
# META "translator" "Don Brutzman"
# META "created" "1 July 1998"
# META "translated" "2 February 2014"
# META "modified" "20 October 2019"
# META "reference" "originals/doorway.wrl"
# META "reference" "http://www.siggraph.org/s98"
# META "reference" "http://www.siggraph.org/s98/conference/courses/18.html"
# META "reference" "http://www.sdsc.edu/~moreland/courses/Siggraph98/vrml97/slides/mt0383.htm"
# META "reference" "http://www.sdsc.edu/~moreland/courses/Siggraph98/vrml97/vrml97.htm"
# META "reference" "https://www.web3d.org/x3d/content/examples/X3dResources.html"
# META "identifier" "https://www.web3d.org/x3d/content/examples/Vrml2Sourcebook/Siggraph98Course/Doorway.x3d"
# META "generator" "Vrml97ToX3dNist, http://ovrt.nist.gov/v2_x3d.html"
# META "generator" "X3D-Edit, https://savage.nps.edu/X3D-Edit"
# META "license" "../license.html"

# [Scene] ========== ========== ==========

# A ProximitySensor routes to four TimeSensors, one per sliding stair. Each stair's timer routes to a PositionInterpolator that outputs varying positions side-to-side along the X axis. The PositionInterpolator's positions are routed into translation fields for Transform nodes surrounding each stair.
# By using different starting positions, the four stairs are made to slide back and forth in a pattern.
# Things to experiment with:
# Add sound! Perhaps the crackling of fire below and the grinding sliding sounds of the stone stairs.
# Use a ScalarInterpolator to flicker the red light as if there is fire below.
# Surround the doorway with an Anchor node that leads somewhere!
# Place a ProximitySensor around the doorway. As you approach it, the ProximitySensor triggers an OrientationInterpolator which slowly rotates the door open. The open door reveals ... !
WorldInfo {
  info [ "Copyright (c) 1997, David R. Nadeau" ]
  title "The Doorway"
}
DEF Entry Viewpoint {
  description "Entry view"
  position 0.0 3.1 10.0
}
NavigationInfo {
  avatarSize [ 0.5 3.0 1.5 ]
  headlight FALSE
  type [ "WALK" "ANY"  ] 
}
DEF Proximity ProximitySensor {
  size 10.0 10.0 50.0
}
Background {
  skyAngle [ 1.47 1.67 ]
  skyColor [ 0.0 0.0 0.0 0.0 0.0 0.0 1.0 0.0 0.0 ]
}
DirectionalLight {
  ambientIntensity 0.5
  color 0.0 0.3 1.0
  direction 1.0 -1.0 -3.0
}
DirectionalLight {
  ambientIntensity 0.3
  color 1.0 0.0 0.0
  direction -1.0 2.5 -1.0
}
DirectionalLight {
  color 1.0 0.0 0.0
  direction -1.0 2.5 -1.0
}
Transform {
  translation 0.0 -0.5 8.0
  children [
      Shape {
        appearance Appearance {
          textureTransform TextureTransform {
            scale 0.5 0.5
          }
          material Material {
          }
          texture DEF Granit ImageTexture {
            url [ "granit_g.jpg" "https://www.web3d.org/x3d/content/examples/Vrml2Sourcebook/Siggraph98Course/granit_g.jpg" ]
          }
        }
        geometry Box {
          size 4.0 0.4 16.0
        }
      }
  ]
}
DEF Stair1 Transform {
  children [
      DEF Stair Inline {
        url [ "Tread.x3d" "https://www.web3d.org/x3d/content/examples/Vrml2Sourcebook/Siggraph98Course/Tread.x3d" "Tread.wrl" "https://www.web3d.org/x3d/content/examples/Vrml2Sourcebook/Siggraph98Course/Tread.wrl" ]
      }
  ]
}
Transform {
  translation -1.0 0.5 -2.0
  children [
      DEF Stair2 Transform {
        children [
            USE Stair
        ]
      }
  ]
}
Transform {
  translation 1.5 1.0 -4.0
  children [
      DEF Stair3 Transform {
        children [
            USE Stair
        ]
      }
  ]
}
Transform {
  translation 0.0 1.5 -6.0
  children [
      DEF Stair4 Transform {
        children [
            USE Stair
        ]
      }
  ]
}
Transform {
  translation 0.0 2.0 -8.0
  children [
      USE Stair
  ]
}
Transform {
  scale 0.7 0.7 0.7
  translation 0.0 2.0 -10.0
  children [
      Inline {
        url [ "GlowDoor.x3d" "https://www.web3d.org/x3d/content/examples/Vrml2Sourcebook/Siggraph98Course/GlowDoor.x3d" "GlowDoor.wrl" "https://www.web3d.org/x3d/content/examples/Vrml2Sourcebook/Siggraph98Course/GlowDoor.wrl" ]
      }
  ]
}
Transform {
  rotation 0.0 0.0 1.0 0.785
  translation -2.0 6.0 -10.0
  children [
      DEF ArchBox Shape {
        appearance Appearance {
          material Material {
            ambientIntensity 0.0
            diffuseColor 1.0 1.0 1.0
            emissiveColor 0.4 0.4 0.4
          }
          texture ImageTexture {
            url [ "marble_g.jpg" "https://www.web3d.org/x3d/content/examples/Vrml2Sourcebook/Siggraph98Course/marble_g.jpg" ]
          }
        }
        geometry Box {
          size 4.0 0.2 2.0
        }
      }
      Transform {
        translation 1.0 0.2 1.0
        children [
            USE ArchBox
        ]
      }
      Transform {
        translation 2.0 0.4 2.0
        children [
            USE ArchBox
        ]
      }
  ]
}
Transform {
  rotation 0.0 0.0 1.0 -0.785
  translation 2.0 6.0 -10.0
  children [
      USE ArchBox
      Transform {
        translation -1.0 0.2 1.0
        children [
            USE ArchBox
        ]
      }
      Transform {
        translation -2.0 0.4 2.0
        children [
            USE ArchBox
        ]
      }
  ]
}
DEF Stair1Timer TimeSensor {
  cycleInterval 4.0
  loop TRUE
}
DEF Stair1Path PositionInterpolator {
  key [ 0.0 0.25 0.5 0.75 1.0 ]
  keyValue [ 0.0 0.0 0.0 3.0 0.0 0.0 0.0 0.0 0.0 -3.0 0.0 0.0 0.0 0.0 0.0 ]
}
ROUTE Proximity.enterTime TO Stair1Timer.set_startTime
ROUTE Stair1Timer.fraction_changed TO Stair1Path.set_fraction
ROUTE Stair1Path.value_changed TO Stair1.set_translation
DEF Stair2Timer TimeSensor {
  cycleInterval 4.0
  loop TRUE
}
DEF Stair2Path PositionInterpolator {
  key [ 0.0 0.25 0.5 0.75 1.0 ]
  keyValue [ 3.0 0.0 0.0 0.0 0.0 0.0 -3.0 0.0 0.0 0.0 0.0 0.0 3.0 0.0 0.0 ]
}
ROUTE Proximity.enterTime TO Stair2Timer.set_startTime
ROUTE Stair2Timer.fraction_changed TO Stair2Path.set_fraction
ROUTE Stair2Path.value_changed TO Stair2.set_translation
DEF Stair3Timer TimeSensor {
  cycleInterval 4.0
  loop TRUE
}
DEF Stair3Path PositionInterpolator {
  key [ 0.0 0.25 0.5 0.75 1.0 ]
  keyValue [ -3.0 0.0 0.0 0.0 0.0 0.0 3.0 0.0 0.0 0.0 0.0 0.0 -3.0 0.0 0.0 ]
}
ROUTE Proximity.enterTime TO Stair3Timer.set_startTime
ROUTE Stair3Timer.fraction_changed TO Stair3Path.set_fraction
ROUTE Stair3Path.value_changed TO Stair3.set_translation
DEF Stair4Timer TimeSensor {
  cycleInterval 4.0
  loop TRUE
}
DEF Stair4Path PositionInterpolator {
  key [ 0.0 0.25 0.5 0.75 1.0 ]
  keyValue [ 0.0 0.0 0.0 -3.0 0.0 0.0 0.0 0.0 0.0 3.0 0.0 0.0 0.0 0.0 0.0 ]
}
ROUTE Proximity.enterTime TO Stair4Timer.set_startTime
ROUTE Stair4Timer.fraction_changed TO Stair4Path.set_fraction
ROUTE Stair4Path.value_changed TO Stair4.set_translation
